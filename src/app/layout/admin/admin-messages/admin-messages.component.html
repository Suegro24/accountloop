<app-header [isAdminLoggedIn]="true" pageName="Admin - wiadomości"></app-header>
<app-sidenav [isAdminLoggedIn]="true"></app-sidenav>

<div class="admin-messages-container">
    <mat-tab-group class="tabs-container" mat-align-tabs="center">
        <mat-tab label="Oczekujące">
            <div>
                <mat-paginator [length]="this.waitingMails?.length || 0"
                [pageSize]="5"
                [pageSizeOptions]="[3, 5, 10]">
                </mat-paginator>

                <table mat-table [dataSource]="dataSourceWaitingMails" class="waiting-messages-list mat-elevation-z8">
                
                    <ng-container matColumnDef="topic">
                        <th mat-header-cell *matHeaderCellDef> Temat </th>
                        <td mat-cell *matCellDef="let element"> {{element.topic}} </td>
                    </ng-container>
                
                    <ng-container matColumnDef="message">
                        <th mat-header-cell *matHeaderCellDef> Wiadomość </th>
                        <td mat-cell *matCellDef="let element"> {{element.message | slice:0:30}} </td>
                    </ng-container>

                    <ng-container matColumnDef="senderName">
                        <th mat-header-cell *matHeaderCellDef> Użytkownik </th>
                        <td mat-cell *matCellDef="let element"> {{element.senderName}} </td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="openMail(row, true)"></tr>
                </table>
            </div>
        </mat-tab>
        <mat-tab label="W trakcie">
            <div>
                <mat-paginator [length]="this.inProgressMails?.length || 0"
                [pageSize]="5"
                [pageSizeOptions]="[3, 5, 10]">
                </mat-paginator>

                <table mat-table [dataSource]="dataSourceinProgressMails" class="waiting-messages-list mat-elevation-z8">
                
                    <ng-container matColumnDef="topic">
                        <th mat-header-cell *matHeaderCellDef> Temat </th>
                        <td mat-cell *matCellDef="let element"> {{element.topic}} </td>
                    </ng-container>
                
                    <ng-container matColumnDef="message">
                        <th mat-header-cell *matHeaderCellDef> Wiadomość </th>
                        <td mat-cell *matCellDef="let element"> {{element.message | slice:0:30}} </td>
                    </ng-container>

                    <ng-container matColumnDef="senderName">
                        <th mat-header-cell *matHeaderCellDef> Użytkownik </th>
                        <td mat-cell *matCellDef="let element"> {{element.senderName}} </td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="openMail(row, true)"></tr>
                </table>
            </div>
        </mat-tab>
        <mat-tab label="Zakończone">
            <div>
                <mat-paginator [length]="this.endedMails?.length || 0"
                [pageSize]="5"
                [pageSizeOptions]="[3, 5, 10]">
                </mat-paginator>

                <table mat-table [dataSource]="dataSourceEndedMails" class="waiting-messages-list mat-elevation-z8">
                
                    <ng-container matColumnDef="topic">
                        <th mat-header-cell *matHeaderCellDef> Temat </th>
                        <td mat-cell *matCellDef="let element"> {{element.topic}} </td>
                    </ng-container>
                
                    <ng-container matColumnDef="message">
                        <th mat-header-cell *matHeaderCellDef> Wiadomość </th>
                        <td mat-cell *matCellDef="let element"> {{element.message | slice:0:30}} </td>
                    </ng-container>

                    <ng-container matColumnDef="senderName">
                        <th mat-header-cell *matHeaderCellDef> Użytkownik </th>
                        <td mat-cell *matCellDef="let element"> {{element.senderName}} </td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="openMail(row, false)"></tr>
                </table>
            </div>
        </mat-tab>
    </mat-tab-group>
</div>

<app-footer></app-footer>